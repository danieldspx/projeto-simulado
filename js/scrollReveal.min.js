!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.scrollReveal=t()}(this,function(e,t,i){return window.scrollReveal=function(e){"use strict";function t(t){this.docElem=e.document.documentElement,this.options=this.extend(this.defaults,t),this.styleBank=[],1==this.options.init&&this.init()}return t.prototype={defaults:{after:"0s",enter:"bottom",move:"24px",over:"0.66s",easing:"ease-in-out",viewportFactor:.33,reset:!1,init:!0},init:function(){this.scrolled=!1;var t=this;this.elems=Array.prototype.slice.call(this.docElem.querySelectorAll("[data-scroll-reveal]")),this.elems.forEach(function(e,i){t.styleBank[e]||(t.styleBank[e]=e.getAttribute("style")),t.update(e)});var i=function(){t.scrolled||(t.scrolled=!0,setTimeout(function(){t._scrollPage()},60))},o=function(){function e(){t._scrollPage(),t.resizeTimeout=null}t.resizeTimeout&&clearTimeout(t.resizeTimeout),t.resizeTimeout=setTimeout(e,200)};e.addEventListener("scroll",i,!1),e.addEventListener("resize",o,!1)},_scrollPage:function(){var e=this;this.elems.forEach(function(t,i){e.update(t)}),this.scrolled=!1},parseLanguage:function(e){function o(e){var t=[],i=["from","the","and","then","but","with"];return e.forEach(function(e,o){i.indexOf(e)>-1||t.push(e)}),t}var t=e.getAttribute("data-scroll-reveal").split(/[, ]+/),i={};return t=o(t),t.forEach(function(e,o){switch(e){case"enter":return void(i.enter=t[o+1]);case"after":return void(i.after=t[o+1]);case"wait":return void(i.after=t[o+1]);case"move":return void(i.move=t[o+1]);case"ease":return i.move=t[o+1],void(i.ease="ease");case"ease-in":return i.move=t[o+1],void(i.easing="ease-in");case"ease-in-out":return i.move=t[o+1],void(i.easing="ease-in-out");case"ease-out":return i.move=t[o+1],void(i.easing="ease-out");case"over":return void(i.over=t[o+1]);default:return}}),i},update:function(e){var t=this.genCSS(e),i=this.styleBank[e];return null!=i?i+=";":i="",e.getAttribute("data-scroll-reveal-initialized")||(e.setAttribute("style",i+t.initial),e.setAttribute("data-scroll-reveal-initialized",!0)),this.isElementInViewport(e,this.options.viewportFactor)?e.getAttribute("data-scroll-reveal-complete")?void 0:this.isElementInViewport(e,this.options.viewportFactor)?(e.setAttribute("style",i+t.target+t.transition),void(this.options.reset||setTimeout(function(){""!=i?e.setAttribute("style",i):e.removeAttribute("style"),e.setAttribute("data-scroll-reveal-complete",!0)},t.totalDuration))):void 0:void(this.options.reset&&e.setAttribute("style",i+t.initial+t.reset))},genCSS:function(e){var i,o,t=this.parseLanguage(e);t.enter?(("top"==t.enter||"bottom"==t.enter)&&(i=t.enter,o="y"),("left"==t.enter||"right"==t.enter)&&(i=t.enter,o="x")):(("top"==this.options.enter||"bottom"==this.options.enter)&&(i=this.options.enter,o="y"),("left"==this.options.enter||"right"==this.options.enter)&&(i=this.options.enter,o="x")),("top"==i||"left"==i)&&(t.move?t.move="-"+t.move:t.move="-"+this.options.move);var a=t.move||this.options.move,n=t.over||this.options.over,s=t.after||this.options.after,l=t.easing||this.options.easing,r="-webkit-transition: -webkit-transform "+n+" "+l+" "+s+",  opacity "+n+" "+l+" "+s+";transition: transform "+n+" "+l+" "+s+", opacity "+n+" "+l+" "+s+";-webkit-perspective: 1000;-webkit-backface-visibility: hidden;",u="-webkit-transition: -webkit-transform "+n+" "+l+" 0s,  opacity "+n+" "+l+" "+s+";transition: transform "+n+" "+l+" 0s,  opacity "+n+" "+l+" "+s+";-webkit-perspective: 1000;-webkit-backface-visibility: hidden;",d="-webkit-transform: translate"+o+"("+a+");transform: translate"+o+"("+a+");opacity: 0;",c="-webkit-transform: translate"+o+"(0);transform: translate"+o+"(0);opacity: 1;";return{transition:r,initial:d,target:c,reset:u,totalDuration:1e3*(parseFloat(n)+parseFloat(s))}},getViewportH:function(){var t=this.docElem.clientHeight,i=e.innerHeight;return i>t?i:t},getOffset:function(e){var t=0,i=0;do isNaN(e.offsetTop)||(t+=e.offsetTop),isNaN(e.offsetLeft)||(i+=e.offsetLeft);while(e=e.offsetParent);return{top:t,left:i}},isElementInViewport:function(t,i){var o=e.pageYOffset,a=o+this.getViewportH(),n=t.offsetHeight,s=this.getOffset(t).top,l=s+n,i=i||0;return a>=s+n*i&&l>=o||"fixed"==(t.currentStyle?t.currentStyle:e.getComputedStyle(t,null)).position},extend:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}},t}(window),scrollReveal});